<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√∫ria Digital - Painel Administrativo</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Painel administrativo da Arquidiocese de Bel√©m do Par√° - Gerenciamento de conte√∫do e sistema CMS.">
    <meta name="robots" content="noindex, nofollow">
    <meta name="author" content="Arquidiocese de Bel√©m do Par√°">
    
    <!-- Admin Security Headers -->
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Painel administrativo da Arquidiocese de Bel√©m do Par√° - Gerenciamento de conte√∫do e sistema CMS.">
    <meta name="theme-color" content="#1a365d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="C√∫ria Digital">
    <meta name="msapplication-TileColor" content="#1a365d">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/png" href="images/logo-arquidiocese-belem.png">
    <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body class="admin-body">
    <!-- Header da C√∫ria -->
    <header class="admin-header">
        <div class="admin-header-content">
            <div class="admin-logo-area">
                <img src="images/logo-arquidiocese-belem.png" alt="Logo" class="admin-logo">
                <div class="admin-title-area">
                    <h1 class="admin-main-title">C√∫ria Digital</h1>
                    <p class="admin-subtitle">Painel Administrativo da Arquidiocese</p>
                </div>
            </div>
            
            <div class="admin-user-area">
                <div class="user-info">
                    <div class="user-avatar">
                        <span class="avatar-icon">üë§</span>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="user-name">Carregando...</span>
                        <span class="user-title">Administrador</span>
                    </div>
                </div>
                <button class="btn-logout" id="logout-btn">
                    <span>üö™</span>
                    Sair
                </button>
            </div>
        </div>
    </header>
    
    <div class="admin-layout">
        <!-- Sidebar de Navega√ß√£o -->
        <aside class="admin-sidebar">
            <nav class="admin-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link active" data-section="dashboard">
                            <span class="nav-icon">üìä</span>
                            <span class="nav-text">Painel Geral</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#posts" class="nav-link" data-section="posts">
                            <span class="nav-icon">üìù</span>
                            <span class="nav-text">Decretos & Not√≠cias</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#media" class="nav-link" data-section="media">
                            <span class="nav-icon">üñºÔ∏è</span>
                            <span class="nav-text">Biblioteca de M√≠dia</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#pages" class="nav-link" data-section="pages">
                            <span class="nav-icon">üìÑ</span>
                            <span class="nav-text">P√°ginas Institucionais</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link" data-section="settings">
                            <span class="nav-icon">‚öôÔ∏è</span>
                            <span class="nav-text">Configura√ß√µes</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#engagement" class="nav-link" data-section="engagement">
                            <span class="nav-icon">üí¨</span>
                            <span class="nav-text">Engajamento</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#comments" class="nav-link" data-section="comments">
                            <span class="nav-icon">üó®Ô∏è</span>
                            <span class="nav-text">Coment√°rios</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#newsletter" class="nav-link" data-section="newsletter">
                            <span class="nav-icon">üìß</span>
                            <span class="nav-text">Newsletter</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#notifications" class="nav-link" data-section="notifications">
                            <span class="nav-icon">üîî</span>
                            <span class="nav-text">Notifica√ß√µes</span>
                        </a>
                    </li>
                </ul>
                
                <div class="nav-divider"></div>
                
                <div class="nav-quick-actions">
                    <h4 class="quick-title">A√ß√µes R√°pidas</h4>
                    <button class="quick-btn" id="new-post-btn">
                        <span class="quick-icon">‚úçÔ∏è</span>
                        Novo Decreto
                    </button>
                    <a href="index.html" target="_blank" class="quick-btn quick-link">
                        <span class="quick-icon">üëÅÔ∏è</span>
                        Ver Site
                    </a>
                </div>
            </nav>
        </aside>
        
        <!-- √Årea Principal de Conte√∫do -->
        <main class="admin-main">
            <!-- Dashboard Section -->
            <section id="dashboard-section" class="admin-section active">
                <div class="section-header">
                    <h2 class="section-title">Painel Geral</h2>
                    <p class="section-subtitle">Vis√£o geral das atividades da Arquidiocese</p>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üìÑ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-posts">0</div>
                            <div class="stat-label">Decretos Publicados</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="posts-this-month">0</div>
                            <div class="stat-label">Publica√ß√µes Este M√™s</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <div class="stat-number">1,247</div>
                            <div class="stat-label">Fi√©is Alcan√ßados</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-content">
                            <div class="stat-number">98%</div>
                            <div class="stat-label">Satisfa√ß√£o dos Fi√©is</div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-widget">
                        <h3 class="widget-title">√öltimas Publica√ß√µes</h3>
                        <div class="recent-posts" id="recent-posts">
                            <div class="loading-state">
                                <div class="loading-spinner"></div>
                                <p>Carregando publica√ß√µes recentes...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-widget">
                        <h3 class="widget-title">Calend√°rio Lit√∫rgico</h3>
                        <div class="liturgical-calendar">
                            <div class="calendar-today">
                                <div class="today-date" id="today-date"></div>
                                <div class="liturgical-info">
                                    <div class="liturgical-color green"></div>
                                    <span class="liturgical-season">Tempo Comum</span>
                                </div>
                            </div>
                            <div class="upcoming-feasts">
                                <h4>Pr√≥ximas Celebra√ß√µes</h4>
                                <ul>
                                    <li>üéÑ Natal do Senhor - 25 de Dezembro</li>
                                    <li>üëº Santa Maria, M√£e de Deus - 1¬∞ de Janeiro</li>
                                    <li>‚≠ê Epifania do Senhor - 6 de Janeiro</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Posts Section -->
            <section id="posts-section" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">Decretos & Not√≠cias</h2>
                    <div class="section-actions">
                        <button class="btn-primary" id="create-post-btn">
                            <span>‚úçÔ∏è</span>
                            Novo Decreto
                        </button>
                    </div>
                </div>
                
                <div class="posts-management">
                    <div class="posts-filters">
                        <select class="filter-select" id="category-filter">
                            <option value="">Todas as Categorias</option>
                            <option value="decretos">Decretos</option>
                            <option value="comunicados">Comunicados</option>
                            <option value="noticias">Not√≠cias</option>
                            <option value="homilias">Homilias</option>
                        </select>
                        <select class="filter-select" id="status-filter">
                            <option value="">Todos os Status</option>
                            <option value="published">Publicado</option>
                            <option value="draft">Rascunho</option>
                        </select>
                        <select class="filter-select" id="date-filter">
                            <option value="">Todas as Datas</option>
                            <option value="today">Hoje</option>
                            <option value="week">√öltima Semana</option>
                            <option value="month">√öltimo M√™s</option>
                        </select>
                        <select class="filter-select" id="priority-filter">
                            <option value="">Todas as Prioridades</option>
                            <option value="high">Alta Prioridade</option>
                            <option value="normal">Prioridade Normal</option>
                            <option value="low">Baixa Prioridade</option>
                        </select>
                        <input type="search" class="search-input" placeholder="Buscar por t√≠tulo, conte√∫do ou tags..." id="search-posts">
                    </div>
                    
                    <div class="posts-list" id="posts-list">
                        <div class="loading-state">
                            <div class="loading-spinner"></div>
                            <p>Carregando decretos e not√≠cias...</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Engagement Section -->
            <section id="engagement-section" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">Engajamento Geral</h2>
                    <p class="section-subtitle">Vis√£o geral das intera√ß√µes e engajamento dos fi√©is</p>
                </div>
                
                <div class="engagement-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üí¨</div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-comments">0</div>
                            <div class="stat-label">Total de Coment√°rios</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìß</div>
                        <div class="stat-content">
                            <div class="stat-number" id="newsletter-subscribers">0</div>
                            <div class="stat-label">Inscritos Newsletter</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üîî</div>
                        <div class="stat-content">
                            <div class="stat-number" id="push-subscribers">0</div>
                            <div class="stat-label">Push Notifications</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üì±</div>
                        <div class="stat-content">
                            <div class="stat-number" id="whatsapp-clicks">0</div>
                            <div class="stat-label">Cliques WhatsApp</div>
                        </div>
                    </div>
                </div>
                
                <div class="engagement-grid">
                    <div class="engagement-widget">
                        <h3 class="widget-title">Atividade Recente</h3>
                        <div class="activity-feed" id="recent-activity">
                            <!-- Recent activity will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="engagement-widget">
                        <h3 class="widget-title">Configura√ß√µes R√°pidas</h3>
                        <div class="quick-settings">
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="comments-enabled" checked>
                                    Sistema de Coment√°rios
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="moderation-enabled" checked>
                                    Modera√ß√£o de Coment√°rios
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="newsletter-enabled" checked>
                                    Sistema de Newsletter
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="whatsapp-widget" checked>
                                    Widget WhatsApp
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Comments Section -->
            <section id="comments-section" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">Modera√ß√£o de Coment√°rios</h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" id="refresh-comments">
                            üîÑ Atualizar
                        </button>
                        <button class="btn btn-primary" id="bulk-approve">
                            ‚úÖ Aprovar Selecionados
                        </button>
                        <button class="btn btn-danger" id="bulk-reject">
                            ‚ùå Rejeitar Selecionados
                        </button>
                    </div>
                </div>
                
                <div class="comments-filters">
                    <select class="filter-select" id="comment-status-filter">
                        <option value="pending">Pendentes</option>
                        <option value="approved">Aprovados</option>
                        <option value="rejected">Rejeitados</option>
                        <option value="all">Todos</option>
                    </select>
                    <input type="search" class="search-input" placeholder="Buscar coment√°rios..." id="search-comments">
                </div>
                
                <div class="comments-moderation" id="comments-moderation">
                    <!-- Comments will be loaded here by comment-system.js -->
                </div>
            </section>

            <!-- Newsletter Section -->
            <section id="newsletter-section" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">Sistema de Newsletter</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" id="create-campaign">
                            üìß Nova Campanha
                        </button>
                        <button class="btn btn-secondary" id="manage-subscribers">
                            üë• Gerenciar Inscritos
                        </button>
                    </div>
                </div>
                
                <div class="newsletter-dashboard" id="newsletter-dashboard">
                    <!-- Newsletter content will be loaded here by newsletter-system.js -->
                </div>
            </section>

            <!-- Notifications Section -->
            <section id="notifications-section" class="admin-section">
                <div class="section-header">
                    <h2 class="section-title">Push Notifications</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" id="send-notification">
                            üîî Enviar Notifica√ß√£o
                        </button>
                        <button class="btn btn-secondary" id="notification-settings">
                            ‚öôÔ∏è Configura√ß√µes
                        </button>
                    </div>
                </div>
                
                <div class="notifications-dashboard" id="notifications-dashboard">
                    <!-- Notifications content will be loaded here by push-notification-manager.js -->
                </div>
            </section>
            
            <!-- Outras sections ser√£o adicionadas posteriormente -->
        </main>
    </div>
    
    <!-- Modal para Edi√ß√£o de Posts -->
    <div id="post-editor-modal" class="modal-overlay">
        <div class="modal-content post-editor">
            <div class="modal-header">
                <h3 class="modal-title" id="editor-title">Novo Decreto</h3>
                <button class="modal-close" id="close-editor">&times;</button>
            </div>
            
            <form class="post-form" id="post-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="post-title">T√≠tulo do Decreto</label>
                        <input type="text" id="post-title" name="title" class="form-input" placeholder="Ex: Decreto sobre a organiza√ß√£o das par√≥quias..." required>
                    </div>
                    <div class="form-group">
                        <label for="post-category">Categoria</label>
                        <select id="post-category" name="category" class="form-select" required>
                            <option value="">Selecione uma categoria</option>
                            <option value="decretos">Decretos</option>
                            <option value="comunicados">Comunicados</option>
                            <option value="noticias">Not√≠cias</option>
                            <option value="homilias">Homilias</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="post-excerpt">Resumo/Chamada</label>
                    <textarea id="post-excerpt" name="excerpt" class="form-textarea" rows="3" placeholder="Breve resumo que aparecer√° nos cards de not√≠cia..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="post-content">Conte√∫do</label>
                    <div class="editor-toolbar">
                        <button type="button" class="toolbar-btn" data-command="bold">
                            <strong>B</strong>
                        </button>
                        <button type="button" class="toolbar-btn" data-command="italic">
                            <em>I</em>
                        </button>
                        <button type="button" class="toolbar-btn" data-command="underline">
                            <u>U</u>
                        </button>
                        <span class="toolbar-divider"></span>
                        <button type="button" class="toolbar-btn" data-command="insertUnorderedList">
                            ‚Ä¢ Lista
                        </button>
                        <button type="button" class="toolbar-btn" data-command="insertOrderedList">
                            1. Lista
                        </button>
                    </div>
                    <div id="post-content" class="content-editor" contenteditable="true" data-placeholder="Digite o conte√∫do do decreto aqui..."></div>
                </div>
                
                <div class="form-group">
                    <label for="post-tags-input">Tags</label>
                    <input type="text" id="post-tags-input" class="form-input" placeholder="Digite uma tag e pressione Enter...">
                    <div id="post-tags-container" class="tags-container"></div>
                    <small class="form-help">Pressione Enter ou v√≠rgula para adicionar uma tag</small>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="post-status">Status</label>
                        <select id="post-status" name="status" class="form-select">
                            <option value="draft">Rascunho</option>
                            <option value="published">Publicar</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="post-date">Data de Publica√ß√£o</label>
                        <input type="datetime-local" id="post-date" name="publishDate" class="form-input">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="post-priority">Prioridade</label>
                    <select id="post-priority" name="priority" class="form-select">
                        <option value="normal">Normal</option>
                        <option value="high">Alta</option>
                        <option value="low">Baixa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="featured-image-url">Imagem Destacada (URL)</label>
                    <input type="url" id="featured-image-url" name="featuredImage" class="form-input" placeholder="https://exemplo.com/imagem.jpg">
                </div>
                <div class="form-group">
                    <label for="meta-description">Meta Descri√ß√£o (SEO)</label>
                    <textarea id="meta-description" name="metaDescription" class="form-textarea" rows="2" placeholder="Descri√ß√£o para motores de busca (recomendado: 150-160 caracteres)" maxlength="160"></textarea>
                    <small class="form-help character-count">0/160 caracteres</small>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancel-edit">Cancelar</button>
                    <button type="submit" class="btn-primary" id="save-post">
                        <span class="btn-text">Salvar Decreto</span>
                        <div class="btn-loading">
                            <div class="loading-spinner"></div>
                        </div>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="js/multi-site-template.js" type="module" defer></script>
    <script type="module" src="js/admin.js"></script>
    <script src="js/darkmode.js" defer></script>
    
    <!-- Mobile UX Enhancement - Release 6A -->
    <script src="js/mobile-ux.js" defer></script>
    <script src="js/mobile-gestures.js" defer></script>
    <script src="js/mobile-forms.js" defer></script>
    
    <!-- Release 6B: Advanced PWA Features -->
    <script src="js/advanced-pwa-controller.js" defer></script>
    <script src="js/pwa-performance-monitor.js" defer></script>
    
    <!-- Engagement Scripts -->
    <script type="module" src="js/comment-system.js"></script>
    <script type="module" src="js/newsletter-system.js"></script>
    <script type="module" src="js/whatsapp-integration.js"></script>
    <script type="module" src="js/push-notification-manager.js"></script>
    <script type="module" src="js/notification-system.js"></script>
    
    <!-- Scripts -->
    <script type="module" src="js/admin.js"></script>
    <script type="module" src="js/pwa-manager.js"></script>
    <script type="module" src="js/multi-site-template.js"></script>
    <script type="module" src="js/sitemap-generator.js"></script>
    <script type="module" src="js/analytics-dashboard.js"></script>
    <script type="module" src="js/seo-manager.js"></script>
    
    <!-- Analytics Manager -->
    <script src="js/analytics-manager.js"></script>
    <script>
        // Initialize admin-specific analytics
        document.addEventListener('DOMContentLoaded', function() {
            if (window.analyticsManager) {
                // Track admin panel access
                analyticsManager.trackEvent('page_view', {
                    page_title: 'Admin Panel - C√∫ria Digital',
                    page_location: window.location.href,
                    content_group1: 'Admin',
                    content_group2: 'Private'
                });
                
                // Setup admin-specific tracking
                setupAdminTracking();
            }
            
            // Initialize engagement systems for admin
            initializeAdminEngagement();
        });
        
        async function initializeAdminEngagement() {
            try {
                console.log('üöÄ Initializing admin engagement systems...');
                
                // Wait for engagement systems to be available
                await waitForEngagementSystems();
                
                // Setup admin interfaces for each system
                setupCommentSystemAdmin();
                setupNewsletterSystemAdmin();
                setupWhatsAppIntegrationAdmin();
                setupPushNotificationAdmin();
                
                // Load engagement statistics
                loadEngagementStats();
                
                console.log('‚úÖ Admin engagement systems initialized');
            } catch (error) {
                console.error('‚ùå Error initializing admin engagement systems:', error);
            }
        }
        
        function waitForEngagementSystems() {
            return new Promise((resolve) => {
                const checkSystems = () => {
                    if (window.commentSystem && window.newsletterSystem && 
                        window.whatsappIntegration && window.pushNotificationManager) {
                        resolve();
                    } else {
                        setTimeout(checkSystems, 100);
                    }
                };
                checkSystems();
            });
        }
        
        function setupCommentSystemAdmin() {
            const commentsSection = document.getElementById('comments-moderation');
            if (commentsSection && window.commentSystem) {
                // Create admin interface for comments
                commentsSection.innerHTML = window.commentSystem.createAdminInterface();
                
                // Setup event listeners for comment moderation
                document.getElementById('refresh-comments')?.addEventListener('click', () => {
                    window.commentSystem.loadModerationStats();
                });
            }
        }
        
        function setupNewsletterSystemAdmin() {
            const newsletterDashboard = document.getElementById('newsletter-dashboard');
            if (newsletterDashboard && window.newsletterSystem) {
                // Create admin interface for newsletter
                newsletterDashboard.innerHTML = window.newsletterSystem.createAdminInterface();
            }
        }
        
        function setupWhatsAppIntegrationAdmin() {
            const engagementWidget = document.querySelector('.engagement-grid');
            if (engagementWidget && window.whatsappIntegration) {
                // Add WhatsApp admin section
                const whatsappWidget = document.createElement('div');
                whatsappWidget.className = 'engagement-widget';
                whatsappWidget.innerHTML = window.whatsappIntegration.createAdminInterface();
                engagementWidget.appendChild(whatsappWidget);
            }
        }
        
        function setupPushNotificationAdmin() {
            const notificationsDashboard = document.getElementById('notifications-dashboard');
            if (notificationsDashboard && window.pushNotificationManager) {
                // Create admin interface for push notifications
                notificationsDashboard.innerHTML = window.pushNotificationManager.createAdminInterface();
                
                // Setup send notification button
                document.getElementById('send-notification')?.addEventListener('click', () => {
                    window.pushNotificationManager.openSendNotificationDialog();
                });
            }
        }
        
        async function loadEngagementStats() {
            try {
                // Load comment stats
                if (window.commentSystem) {
                    const commentStats = await window.commentSystem.getStats();
                    document.getElementById('total-comments').textContent = commentStats.totalComments || 0;
                }
                
                // Load newsletter stats
                if (window.newsletterSystem) {
                    const newsletterStats = await window.newsletterSystem.getStats();
                    document.getElementById('newsletter-subscribers').textContent = newsletterStats.totalSubscribers || 0;
                }
                
                // Load push notification stats
                if (window.pushNotificationManager) {
                    const pushStats = await window.pushNotificationManager.getStats();
                    document.getElementById('push-subscribers').textContent = pushStats.totalSubscribers || 0;
                }
                
                // Load WhatsApp stats
                if (window.whatsappIntegration) {
                    const whatsappStats = await window.whatsappIntegration.getStats();
                    document.getElementById('whatsapp-clicks').textContent = whatsappStats.clicks || 0;
                }
                
            } catch (error) {
                console.error('Error loading engagement stats:', error);
            }
        }
        
        function setupAdminTracking() {
            // Track CMS actions
            document.addEventListener('click', function(e) {
                const target = e.target;
                
                // Track button clicks
                if (target.matches('.btn-primary, .btn-secondary, .btn-danger, .admin-btn')) {
                    const action = target.textContent.trim();
                    analyticsManager.trackEvent('admin_action', {
                        action_type: 'button_click',
                        action_name: action,
                        section: getActiveSection()
                    });
                }
                
                // Track tab switches
                if (target.matches('.nav-item, .admin-nav-item')) {
                    const tabName = target.textContent.trim();
                    analyticsManager.trackEvent('admin_navigation', {
                        tab_name: tabName,
                        navigation_type: 'tab_switch'
                    });
                }
            });
            
            // Track form submissions
            document.addEventListener('submit', function(e) {
                const form = e.target;
                const formType = form.id || form.className || 'unknown_form';
                
                analyticsManager.trackEvent('admin_form_submit', {
                    form_type: formType,
                    section: getActiveSection()
                });
            });
            
            // Track content management actions
            window.trackContentAction = function(action, contentType, contentId) {
                analyticsManager.trackEvent('content_management', {
                    action: action, // create, edit, delete, publish, schedule
                    content_type: contentType,
                    content_id: contentId || 'new',
                    timestamp: new Date().toISOString()
                });
            };
        }
        
        function getActiveSection() {
            const activeTab = document.querySelector('.nav-item.active, .admin-nav-item.active');
            return activeTab ? activeTab.textContent.trim() : 'unknown';
        }
    </script>
    
    <!-- PWA Initialization -->
    <script>
        window.addEventListener('load', () => {
            console.log('üöÄ Inicializando PWA no painel administrativo...');
            console.log('‚úÖ PWA Admin inicializado!');
        });
    </script>
</body>
</html>
